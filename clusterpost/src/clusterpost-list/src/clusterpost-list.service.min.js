angular.module("clusterpost-list").factory("clusterpostService",function(t,e,r){return{getExecutionServers:function(){return e({method:"GET",url:"/executionserver"})},getJobStatus:function(t){return e({method:"GET",url:"/executionserver/"+t})},submitJob:function(t,r){return e({method:"POST",url:"/executionserver/"+t,data:{force:r}})},killJob:function(t){return e({method:"DELETE",url:"/executionserver/"+t})},createJob:function(t){return e({method:"POST",url:"/dataprovider",data:t})},getAllJobs:function(t){return e({method:"GET",url:"/dataprovider",params:{executable:t}})},updateJob:function(t){return e({method:"PUT",url:"/dataprovider",data:t})},getJob:function(t){return e({method:"GET",url:"/dataprovider/"+t})},getJobDownload:function(t){return e({method:"GET",url:"/dataprovider/download/job/"+t,responseType:"blob"}).then(function(r){return e({method:"DELETE",url:"/dataprovider/download/job/"+t}).then(function(){return r})})},getAttachment:function(t,r,n){return e({method:"GET",url:"/dataprovider/"+t+"/"+encodeURIComponent(r),responseType:n})},getAttachmentDowloadToken:function(t,r,n){return e({method:"GET",url:"/dataprovider/download/"+t+"/"+encodeURIComponent(r),params:{expires:n}})},getDownloadAttachmentURL:function(t,e){return this.getAttachmentDowloadToken(t,e).then(function(t){return"/dataprovider/download/"+t.data.token})},addAttachment:function(t,r,n){return e({method:"PUT",url:"/dataprovider/"+t+"/"+r,data:n})},addAttachments:function(t,e,r){var n=this,o=function(t,e,r,u,a){return n.addAttachment(t,e[u],r[u]).then(function(n){return a.push(n),++u<e.length&&u<r.length?o(t,e,r,u,a):a})};return o(t,e,r,0,[])},getJobUser:function(t,r,n){return e({method:"GET",url:"/dataprovider/user",params:{userEmail:t,jobstatus:r,executable:n}})},getUserJobs:function(t){return e({method:"GET",url:"/dataprovider/user",params:t})},deleteJob:function(t){return e({method:"DELETE",url:"/dataprovider/"+t})},createAndSubmitJob:function(t,e,r){var n=this;return n.createJob(t).then(function(t){var o=t.data.id;return n.addAttachments(o,e,r).then(function(t){return n.submitJob(o)})})},getExecutionServerTokens:function(){return e({method:"GET",url:"/executionserver/tokens"})}}});