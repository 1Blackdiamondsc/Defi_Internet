var Promise=require("bluebird"),request=require("request"),fs=require("fs"),path=require("path");module.exports=function(e,r,i){var t=e+"/_design/"+(i=i.replace(".json",""));return new Promise(function(e,n){request(t,function(t,s,u){if(t)n(t);else{var o=JSON.parse(u);delete o._rev;var a=JSON.stringify(o,null,4),f=path.join(r,i+".json");try{fs.writeFileSync(f,a);e({ok:!0,id:f})}catch(t){n(t)}}})})};