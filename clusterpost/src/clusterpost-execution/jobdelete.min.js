var fs=require("fs"),path=require("path");module.exports=function(e,r,t){var n=require("./executionserver.methods")(r);return(t?Promise.resolve(t):n.getDocument(e).catch(function(r){return console.log("Job deleted already in the db.",e),null})).then(function(e){if(e)return require(path.join(__dirname,"jobkill"))(e,r)}).then(function(){var t=path.join(r.storagedir,e);try{n.deleteFolderRecursive(t);var o,i=t+".tar.gz";try{o=fs.statSync(i)}catch(e){o=void 0}o&&fs.unlinkSync(i)}catch(e){return{error:e}}return{status:"Folder deleted "+e}})};