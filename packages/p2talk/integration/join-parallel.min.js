"use strict";const assert=require("assertthat"),async=require("async"),createPeers=require("./createPeers"),runTest=require("./runTest");runTest(__filename,e=>t=>{createPeers({count:e.ringSize,serviceInterval:e.serviceInterval},(s,r,n)=>{assert.that(s).is.null(),async.series([function(t){n.waitUntil(r,{interval:e.serviceInterval}).have("status").equalTo({status:"lonely"},t)},function(e){n.formRing(r,e)},function(t){n.waitUntil(r,{interval:e.serviceInterval}).have("status").equalTo({status:"joined"},t)},function(e){n.isRing(r,e)},function(e){n.stop(r,e)}],t)})});