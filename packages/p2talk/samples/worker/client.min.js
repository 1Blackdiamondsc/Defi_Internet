"use strict";const url=require("url"),flaschenpost=require("flaschenpost"),processEnv=require("processenv"),request=require("request"),uuid=require("uuidv4"),logger=flaschenpost.getLogger(),port=processEnv("PORT")||3e3,job={id:process.argv[2]||uuid(),data:process.argv[3]||"foo"};request.post(url.format({protocol:"http",hostname:"localhost",port:port,pathname:"/job"}),{body:{value:job.id,data:job.data},json:!0},(o,e)=>{(o||200!==e.statusCode)&&(logger.fatal("Failed to send job.",o),process.exit(1));const t=e.body.endpoint;logger.info(`Sent job ${job.id} to ${t.host}:${t.port}.`,{job:job,target:t})});